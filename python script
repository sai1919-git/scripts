pipeline{
agent any
stages{
stage('checkout'){
steps{
git url: 'https://github.com/sai1919-git/script',branch:'main'
}
}
stage('Install Dependencies'){
steps{
echo 'installing '
sh 'python3 -m venv venv'
sh '. venv/bin/activate && pip install -r requirements.txt 
}
}
stage('testing'){
steps{
sh '. venv/bin/activate && pytest tests/'
}
}
}
}
2.
pipeline{
agent any
stages{
stage('cloning git'){
steps{
git url:'https://github.com/sai1919-git/script',branch: 'main'
}
}
stage('Install Dependencies'){
steps{
echo 'creating v environment'
sh 'python -m venv venv'
sh '''
.venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
'''
}
}
stage('run'){
steps{
sh '''
. venv/bin/activist
pytest test/ --maxfail=1 --disble-warnings -v
'''
}
}
}
post{
always{
echo ' cleaning up above environment'
sh 'rm rf venv'
}
success{
echo 'finished successfully'
}
failure{
echo 'failure,check above vlogs'
}
}

